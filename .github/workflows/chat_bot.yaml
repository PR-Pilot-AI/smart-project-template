name: "ðŸ¤– Chat Bot"

on:
  issues:
    types: [labeled, commented]
  issue_comment:
    types: [created]

jobs:
  handle-chat:
    if: >
      (github.event.label.name == 'chat' || contains(github.event.issue.labels.*.name, 'chat')) &&
      github.event.sender.login != 'PR-Pilot-AI'
    runs-on: ubuntu-latest
    steps:
      - name: AI Chat Response
        uses: PR-Pilot-AI/smart-actions/quick-task@v1
        with:
          api-key: ${{ secrets.PR_PILOT_API_KEY }}
          agent-instructions: |
            1. Check if the issue has the 'chat' label and is not commented by @PR-Pilot-AI
            2. If the issue meets the criteria, read the issue to understand the context
            3. Search the code base if necessary to gather information related to the issue
            4. Perform CRUD operations on files if required to solve the issue
            5. Read, edit, and create Github issues as needed to respond or take action
            6. Use internet search to find information if the issue requires external data
            7. Comment on the issue with the response or the action taken
            8. Ensure the issue number is injected into the context for accurate tracking
